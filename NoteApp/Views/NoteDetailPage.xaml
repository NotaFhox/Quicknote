<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="NoteApp.Views.NoteDetailPage"
             x:DataType="viewModels:NoteDetailViewModel"
             xmlns:viewModels="clr-namespace:NoteApp.ViewModels"
             Title="{Binding Title}">

    <ContentPage.ToolbarItems>
        <ToolbarItem Text="Save" Command="{Binding SaveCommand}" />
    </ContentPage.ToolbarItems>

    <ScrollView>
        <Grid Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!-- Title Entry -->
            <Entry Grid.Row="0"
                   Text="{Binding Note.Title}"
                   Placeholder="Note Title"
                   FontSize="20"
                   FontAttributes="Bold"
                   Margin="0,0,0,10" />

            <!-- Category Picker -->
            <Grid Grid.Row="1" Margin="0,0,0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                
                <Label Grid.Column="0" 
                       Text="Category:" 
                       VerticalOptions="Center"
                       Margin="0,0,10,0" />
                
                <Picker Grid.Column="1"
                        Title="Select Category"
                        SelectedItem="{Binding Note.Category}">
                    <Picker.ItemsSource>
                        <x:Array Type="{x:Type x:String}">
                            <x:String>General</x:String>
                            <x:String>Work</x:String>
                            <x:String>Personal</x:String>
                            <x:String>Ideas</x:String>
                            <x:String>Shopping</x:String>
                            <x:String>Tasks</x:String>
                        </x:Array>
                    </Picker.ItemsSource>
                </Picker>
            </Grid>

            <!-- Tags Entry -->
            <Entry Grid.Row="2"
                   Text="{Binding Note.Tags}"
                   Placeholder="Tags (comma separated)"
                   FontSize="14"
                   Margin="0,0,0,10" />

            <!-- Last Modified Label -->
            <Label Grid.Row="3"
                   Text="{Binding Note.DateModified, StringFormat='Last modified: {0:dd MMM yyyy HH:mm}'}"
                   FontSize="12"
                   TextColor="Gray"
                   Margin="0,0,0,10" />

            <!-- Content Editor -->
            <Editor Grid.Row="4"
                    Text="{Binding Note.Content}"
                    Placeholder="Start typing your note here..."
                    FontSize="16"
                    AutoSize="TextChanges"
                    VerticalOptions="FillAndExpand" />
        </Grid>
    </ScrollView>
</ContentPage>